<!DOCTYPE html>
<html>
<head>
<title>FoodBack</title>
<link rel="stylesheet" href="css/styles.css" />
<script type="text/javascript"
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script
	src="http://maps.google.com/maps/api/js?key="
	type="text/javascript"></script>
<script type="text/javascript">
$( document ).ready( function() {
    $( '#sayHello' ).click( function( event ) {
        event.preventDefault();

        var result = $( '#result' ),
            name = $.trim( $( '#name' ).val() );

        result.removeClass( 'invalid' );

        if( !name || !name.length ) {
            result.addClass( 'invalid' ).text( 'A name is required!' );
            return;
        }
        //console.log("clicked: " + name);
        $.ajax( 'hello/json/' + name, {
            dataType:'json',
            data:{},
            type:'GET',
            success:function ( data ) {
                //console.log("success: " + data.result);
                $( '#result' ).text( data.result );
            }
        })
        .error( function() {
            //console.log("error");
        });
    });
}); // (document).ready
</script>
</head>
<body>
	FoodBack
	<br>
	<form name="theForm">
		<fieldset>
			<label for="name" id="name_label">Name</label> <input name="name"
				id="name" type="text" required placeholder="Your Name" /> <input
				type="submit" id="sayHello" value="Say Hello" /><span id="result"></span>
		</fieldset>
	</form>

	<div id="map" style="width: 900px; height: 500px;"></div>

	<script type="text/javascript">
       var locations = [
         ['Restaurant Trebbiano',  -23.564188, -46.651951, 0, 'restaurant.html?rest=trebbiano'],
         ['ARABEK', -23.563952, -46.654304,0, 'restaurant.html?rest=arabek'],
         ['Temakeria Makis Place', -23.564973, -46.654079,0, 'restaurant.html?rest=makisplace']

 ];

var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 15,
 center: new google.maps.LatLng(-23.564188,-46.6530453),
 mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {
  marker = new google.maps.Marker({
   position: new google.maps.LatLng(locations[i][1], locations[i][2]),
   map: map,
   url: locations[i][4]
  });

 google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
   return function() {
     infowindow.setContent(locations[i][0] + ' <img src="images/vegan.jpg" alt="vegan">');
     infowindow.open(map, marker);
   }
 })(marker, i));

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
   return function() {
     infowindow.setContent(locations[i][0]);
     infowindow.open(map, marker);
     window.location.href = window.location.href + this.url;
   }
 })(marker, i));

    }

</script>


</body>
</html>
